# 💳 소액결제 · 신용카드 업체 정보 커뮤니티

소액결제 및 신용카드 업체들의 정상/사기 정보를 공유하는 커뮤니티 사이트입니다.

## 🌐 도메인

- **휴대폰 특화**: [휴대폰90프로.store](https://휴대폰90프로.store) 📱
- **카드 특화**: [카드90프로.store](https://카드90프로.store) 💳

두 도메인은 동일한 애플리케이션을 가리키며, 완전한 SEO 최적화가 적용됩니다.

## 🚀 주요 기능

### 업체 정보 관리
- **업체 등록**: 소액결제/신용카드 업체 정보 등록
- **분류 시스템**: 정상업체 🟢 / 사기업체 🔴 구분
- **카테고리**: 소액결제 📱 / 신용카드 💳 분류
- **상세 정보**: 웹사이트, 전화번호, 설명, 평점 관리

### 검색 및 필터링
- 업체명으로 검색
- 카테고리별 필터링 (소액결제/신용카드)
- 분류별 필터링 (정상업체/사기업체)
- 실시간 검색 결과 업데이트

### 리뷰 및 신고 시스템
- 업체별 리뷰 작성 💬
- 사기업체 신고 기능 🚨
- 1-5점 별점 평가 ⭐
- 신고 건수 표시

### 회원 인증
- 이메일+아이디 기반 회원가입 (중복 검사 및 포맷 검증)
- 세션 기반 로그인/로그아웃
- 로그인 후 자유게시판 글 작성 가능
- 이메일 토큰 기반 비밀번호 재설정 지원

### SEO & 검색 노출
- `/robots.txt` 및 동적 `/sitemap.xml` 제공으로 검색 엔진 자동 수집 지원
- 업체/게시글별 고정 링크(`/companies/:id`, `/posts/:id`)와 구조화 데이터(JSON-LD)
- Open Graph/Twitter 메타 태그, 캐노니컬 링크, hreflang 자동 설정
- SPA에서도 모달을 통한 상세보기와 검색엔진용 정적 페이지 동시 제공

### 자유게시판
- 일반 커뮤니티 게시판
- 정보 공유 및 토론
- 카테고리 기반 필터 (현재는 기본 자유게시판, 추후 확장 준비)

## 🛠 기술 스택

- **Backend**: Node.js + Express
- **Database**: SQLite3
- **Frontend**: HTML5 + Tailwind CSS + Vanilla JavaScript
- **기타**: CORS, Body-parser

## 📦 설치 및 실행

### 1. 의존성 설치
```bash
npm install
```

### 2. 개발 서버 실행
```bash
npm run dev
```

### 3. 프로덕션 실행
```bash
npm start
```

서버가 `http://localhost:4200`에서 실행됩니다.

## � 데이터 유지(배포 환경)

Render 같은 호스팅 환경은 기본 파일시스템이 배포/재시작 시 초기화됩니다. SQLite 파일을 프로젝트 내부에 두면 배포할 때마다 데이터(게시글/회원)가 사라질 수 있습니다. 아래 중 한 가지로 영구 저장소를 사용하세요.

- Render 디스크 사용(권장)
	- Render 대시보드 → 웹 서비스 → Disks 추가
	- Mount Path: `/var/data` (예시)
	- 환경변수 추가: `DB_FILE=/var/data/community.db`
	- 재배포 후부터 데이터가 유지됩니다

- 외부 DB 사용(예: Render PostgreSQL)
	- 애플리케이션을 PostgreSQL로 마이그레이션하거나, Prisma/Knex 등 ORM을 도입해 전환합니다

개발 환경에서는 별도 설정이 없으면 프로젝트 폴더의 `community.db` 파일을 사용합니다. 배포 환경에서는 `DB_FILE` 환경변수를 설정해 주십시오.

### 비용 없이(무료) 데이터 유지하는 방법

이 앱은 `DATABASE_URL`이 설정되어 있으면 자동으로 PostgreSQL에 연결합니다. 무료 티어를 제공하는 외부 Postgres를 사용하면 비용 없이 데이터를 영구 저장할 수 있습니다.

예: Neon(PostgreSQL, Free Tier)
- Neon에서 무료 프로젝트 생성 → Connection string 복사
- Render(또는 배포 환경) 환경변수에 `DATABASE_URL` 추가
	- 예) `DATABASE_URL=postgres://USER:PASSWORD@HOST:PORT/DB?sslmode=require`
- 재배포 → 서버 로그에 `[DB] Using PostgreSQL:`가 보이면 성공

SSL 설정
- 일부 제공자(Neon/Supabase 등)는 SSL이 필요할 수 있습니다
- 연결 오류 시 환경변수 `PGSSL=require`를 추가해 주세요

참고
- `DATABASE_URL`이 있으면 Postgres, 없으면 SQLite를 사용합니다
- Postgres 사용 시 별도의 디스크는 필요 없습니다

## �📊 데이터베이스 구조

### companies 테이블
- 업체 기본 정보 (이름, 카테고리, 분류, 연락처 등)
- 평점 및 신고 건수 관리

### company_reviews 테이블
- 업체별 리뷰 및 신고 내역
- 별점 평가 시스템

### posts 테이블
- 자유게시판 글 관리

## 🔍 사용법

### 회원가입 & 로그인
1. 상단 우측의 `회원가입` 버튼으로 계정을 생성합니다
2. 아이디는 3~20자, 비밀번호는 6~64자 범위로 입력합니다
3. 생성 즉시 로그인되며, 이후 `로그인` 버튼으로 다시 접속할 수 있습니다
4. `로그아웃`을 누르면 세션이 종료됩니다

### 업체 정보 등록
1. "업체등록" 버튼 클릭
2. 필수 정보 입력 (업체명, 카테고리, 분류)
3. 선택 정보 입력 (연락처, 평점, 상세설명)
4. 등록 완료

### 업체 검색
1. 헤더의 필터 및 검색창 활용
2. 카테고리/분류 선택
3. 업체명 검색
4. 실시간 결과 확인

### 리뷰 작성
1. 업체 카드 클릭하여 상세 페이지 진입
2. 하단 리뷰 작성 폼 활용
3. 리뷰 또는 신고 선택
4. 내용 작성 후 등록

### 자유게시판 글쓰기
1. `자유게시판` 탭에서 로그인 상태를 확인합니다
2. `글쓰기` 버튼을 누르면 현재 카테고리에 맞춰 작성 폼이 열립니다
3. 제목과 내용을 입력 후 등록하면 게시글이 추가됩니다 (로그인 필요)

## ⚠️ 주의사항

- 본 사이트의 정보는 사용자 제공 정보로, 정확성을 보장하지 않습니다
- 거래 전 반드시 직접 확인하시기 바랍니다
- 허위 정보 제공 시 법적 책임이 있을 수 있습니다

## 📝 라이선스

이 프로젝트는 MIT 라이선스를 따릅니다.
